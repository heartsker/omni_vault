#!/bin/bash

echo "üîç Checking commit message for Conventional Commits compliance..."
COMMIT_MSG_FILE=$1
COMMIT_MSG=$(cat "$COMMIT_MSG_FILE")

# Regex for Conventional Commit messages
CONVENTIONAL_REGEX="^(feat|fix|docs|style|refactor|perf|test|chore|ci|build|revert|other)(\(.+\))?: .+$"

# Check if the commit message matches the regex
if ! [[ "$COMMIT_MSG" =~ $CONVENTIONAL_REGEX ]]; then
  echo "‚ùå Commit message does not follow Conventional Commits."
  echo "   Example: feat(auth): add login functionality"
  echo "   See: https://www.conventionalcommits.org/en/v1.0.0/"
  exit 1
fi

echo "‚úÖ Commit message follows Conventional Commits."
